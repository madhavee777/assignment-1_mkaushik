

name: assignment-test

on:
  push:
    tags-ignore:
      - '*'
    branches:
      - '*'

jobs:
  # Job 1: Grades your Threading code (Assignment 4 Part 1)
  unit-test:
    runs-on: ubuntu-latest
    container: cuaesd/aesd-autotest:24-unit-test
    steps:
      - uses: actions/checkout@v2
        with:
          submodules: recursive
      
      # FIX: Install the tools that unit-test.sh needs
      - name: Install Build Tools
        run: |
          apt-get update
          apt-get install -y cmake ruby

      # FIX: Run the shell script we verified locally
      - name: Run unit test
        run: |
          chmod +x unit-test.sh
          ./unit-test.sh

  # Job 2: Grades your Buildroot setup (Assignment 4 Part 2)
  full-test:
    runs-on: ubuntu-latest
    container: cuaesd/aesd-autotest:24-assignment4-buildroot
    timeout-minutes: 120
    steps:
      - uses: actions/checkout@v2
        with:
          submodules: recursive
      - name: Run full test
        run: ./full-test.sh




